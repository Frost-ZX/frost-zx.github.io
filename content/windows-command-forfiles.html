<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Windows forfiles 命令 - Frost-ZX</title>
    <meta name="description" content="Frost-ZX 的博客">
    <meta name="generator" content="VitePress v2.0.0-alpha.12">
    <link rel="preload stylesheet" href="/assets/style.1GppXPi7.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    <script type="module" src="/assets/chunks/metadata.52a647e9.js"></script>
    <script type="module" src="/assets/app.DGc_72h5.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.Kwq5DYwo.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DZmKp_jX.js">
    <link rel="modulepreload" href="/assets/content_windows-command-forfiles.md.Cts358fW.lean.js">
    <link rel="icon" href="/favicon.ico">
    <meta name="keywords" content="blog,frost-zx,minecraft,博客,分享,记录,技术,教程">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-e2136bda><!--[--><!--]--><!--[--><span tabindex="-1" data-v-2453f569></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-2453f569>Skip to content</a><!--]--><!----><header class="VPNav" data-v-e2136bda data-v-cc50fdd0><div class="VPNavBar" data-v-cc50fdd0 data-v-4fcca0f0><div class="wrapper" data-v-4fcca0f0><div class="container" data-v-4fcca0f0><div class="title" data-v-4fcca0f0><div class="VPNavBarTitle" data-v-4fcca0f0 data-v-fe2e4881><a class="title" href="/" data-v-fe2e4881><!--[--><!--]--><!--[--><img class="VPImage logo" src="/favicon.png" alt data-v-4e9adfb3><!--]--><span data-v-fe2e4881>Frost-ZX</span><!--[--><!--]--></a></div></div><div class="content" data-v-4fcca0f0><div class="content-body" data-v-4fcca0f0><!--[--><!--]--><div class="VPNavBarSearch search" data-v-4fcca0f0><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-4fcca0f0 data-v-f8675aa4><span id="main-nav-aria-label" class="visually-hidden" data-v-f8675aa4> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-f8675aa4 data-v-c89c70b8><!--[--><span data-v-c89c70b8>主页</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/about.html" tabindex="0" data-v-f8675aa4 data-v-c89c70b8><!--[--><span data-v-c89c70b8>关于</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/comments.html" tabindex="0" data-v-f8675aa4 data-v-c89c70b8><!--[--><span data-v-c89c70b8>留言板</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/links.html" tabindex="0" data-v-f8675aa4 data-v-c89c70b8><!--[--><span data-v-c89c70b8>友情链接</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-4fcca0f0 data-v-38c15e47><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-38c15e47 data-v-dccff3e1 data-v-fd45b2ff><span class="check" data-v-fd45b2ff><span class="icon" data-v-fd45b2ff><!--[--><span class="vpi-sun sun" data-v-dccff3e1></span><span class="vpi-moon moon" data-v-dccff3e1></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-4fcca0f0 data-v-cd170536 data-v-28d30af3><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Frost-ZX" aria-label target="_blank" rel="me noopener" data-v-28d30af3 data-v-1523c1b6><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" /></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-4fcca0f0 data-v-747ffeb1 data-v-68102e26><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-68102e26><span class="vpi-more-horizontal icon" data-v-68102e26></span></button><div class="menu" data-v-68102e26><div class="VPMenu" data-v-68102e26 data-v-e24668c2><!----><!--[--><!--[--><!----><div class="group" data-v-747ffeb1><div class="item appearance" data-v-747ffeb1><p class="label" data-v-747ffeb1>切换主题</p><div class="appearance-action" data-v-747ffeb1><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-747ffeb1 data-v-dccff3e1 data-v-fd45b2ff><span class="check" data-v-fd45b2ff><span class="icon" data-v-fd45b2ff><!--[--><span class="vpi-sun sun" data-v-dccff3e1></span><span class="vpi-moon moon" data-v-dccff3e1></span><!--]--></span></span></button></div></div></div><div class="group" data-v-747ffeb1><div class="item social-links" data-v-747ffeb1><div class="VPSocialLinks social-links-list" data-v-747ffeb1 data-v-28d30af3><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Frost-ZX" aria-label target="_blank" rel="me noopener" data-v-28d30af3 data-v-1523c1b6><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z" /></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-4fcca0f0 data-v-126e00f4><span class="container" data-v-126e00f4><span class="top" data-v-126e00f4></span><span class="middle" data-v-126e00f4></span><span class="bottom" data-v-126e00f4></span></span></button></div></div></div></div><div class="divider" data-v-4fcca0f0><div class="divider-line" data-v-4fcca0f0></div></div></div><!----></header><div class="VPLocalNav empty fixed" data-v-e2136bda data-v-3b1f51b6><div class="container" data-v-3b1f51b6><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-3b1f51b6 data-v-680f5ca0><button data-v-680f5ca0>返回顶部</button><!----></div></div></div><!----><div class="VPContent" id="VPContent" data-v-e2136bda data-v-7a217acf><div class="VPDoc has-aside" data-v-7a217acf data-v-689a3e08><!--[--><!--]--><div class="container" data-v-689a3e08><div class="aside" data-v-689a3e08><div class="aside-curtain" data-v-689a3e08></div><div class="aside-container" data-v-689a3e08><div class="aside-content" data-v-689a3e08><div class="VPDocAside" data-v-689a3e08 data-v-c3596b53><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-c3596b53 data-v-7f806efd><div class="content" data-v-7f806efd><div class="outline-marker" data-v-7f806efd></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-7f806efd>目录</div><ul class="VPDocOutlineItem root" data-v-7f806efd data-v-063d2852><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-c3596b53></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-689a3e08><div class="content-container" data-v-689a3e08><!--[--><!--]--><main class="main" data-v-689a3e08><div style="position:relative;" class="vp-doc _content_windows-command-forfiles" data-v-689a3e08><div><h1 id="windows-forfiles-命令" tabindex="-1">Windows forfiles 命令 <a class="header-anchor" href="#windows-forfiles-命令" aria-label="Permalink to “Windows forfiles 命令”">​</a></h1><h2 id="参考" tabindex="-1">参考 <a class="header-anchor" href="#参考" aria-label="Permalink to “参考”">​</a></h2><p><a href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/forfiles" target="_blank" rel="noreferrer">forfiles | Microsoft Docs</a></p><h2 id="简介" tabindex="-1">简介 <a class="header-anchor" href="#简介" aria-label="Permalink to “简介”">​</a></h2><p>forfiles 命令用于对单个文件或一组文件执行特定的命令，通常用于批量处理文件。</p><h2 id="命令语法" tabindex="-1">命令语法 <a class="header-anchor" href="#命令语法" aria-label="Permalink to “命令语法”">​</a></h2><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>forfiles [/P pathname] [/M searchmask] [/S]</span></span>
<span class="line"><span>         [/C command] [/D [+ | -] {yyyy-MM-dd | dd}]</span></span></code></pre></div><h2 id="命令参数" tabindex="-1">命令参数 <a class="header-anchor" href="#命令参数" aria-label="Permalink to “命令参数”">​</a></h2><div class="language-"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>/P    pathname      表示开始搜索的路径。默认文件夹是当前工作的目录（.）。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/M    searchmask    根据搜索掩码搜索文件。默认搜索掩码是 &#39;*&#39;。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/S                  指导 forfiles 递归到子目录。像 &quot;DIR /S&quot;。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/C    command       表示为每个文件执行的命令。命令字符串应该用双引号括起来。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    默认命令是 &quot;cmd /c echo @file&quot;。下列变量可以用在命令字符串中:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    @file    - 返回文件名。</span></span>
<span class="line"><span>                    @fname   - 返回不带扩展名的文件名。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    @ext     - 只返回文件的扩展名。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    @path    - 返回文件的完整路径。</span></span>
<span class="line"><span>                    @relpath - 返回文件的相对路径。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    @isdir   - 如果文件类型是目录，返回 &quot;TRUE&quot;；如果是文件，返回 &quot;FALSE&quot;。</span></span>
<span class="line"><span>                    @fsize   - 以字节为单位返回文件大小。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    @fdate   - 返回文件上一次修改的日期。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    @ftime   - 返回文件上一次修改的时间。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    要在命令行包括特殊字符，字符请以 0xHH 形式</span></span>
<span class="line"><span>                    使用十六进制代码（例如 0x09 为 tab）。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    内部 CMD.exe 命令前面应以 &quot;cmd /c&quot; 开始。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/D    date          选择文件，其上一次修改日期大于或等于（+），</span></span>
<span class="line"><span>                    或者小于或等于（-）用 &quot;yyyy-MM-dd&quot; 格式指定的日期;</span></span>
<span class="line"><span></span></span>
<span class="line"><span>                    或选择文件，其上一次修改日期大于或等于（+）当前日期加 &quot;dd&quot; 天，</span></span>
<span class="line"><span>                    或者小于或等于（-）当前日期减 &quot;dd&quot; 天。</span></span>
<span class="line"><span>                    有效的 &quot;dd&quot; 天数可以是 0 - 32768 范围内的任何数字。</span></span>
<span class="line"><span>                    如果没有指定，&quot;+&quot; 被当作默认符号。</span></span>
<span class="line"><span></span></span>
<span class="line"><span>/?                  显示此帮助消息。</span></span></code></pre></div><h2 id="命令示例" tabindex="-1">命令示例 <a class="header-anchor" href="#命令示例" aria-label="Permalink to “命令示例”">​</a></h2><div class="language-text"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>FORFILES</span></span>
<span class="line"><span>FORFILES /?</span></span>
<span class="line"><span>FORFILES /P C:\WINDOWS /S /M DNS*.*</span></span>
<span class="line"><span>FORFILES /S /M *.txt /C &quot;cmd /C type @file | more&quot;</span></span>
<span class="line"><span>FORFILES /P C:\ /S /M *.bat</span></span>
<span class="line"><span>FORFILES /D -30 /M *.exe /C &quot;cmd /C ECHO @path 0x09 在 30 前就被更改。&quot;</span></span>
<span class="line"><span>FORFILES /D 2001-01-01 /C &quot;cmd /C ECHO @fname 在 2001年1月1日就是新的。&quot;</span></span>
<span class="line"><span>FORFILES /D +2021-8-30 /C &quot;cmd /C ECHO @fname 今天是新的。&quot;</span></span>
<span class="line"><span>FORFILES /M *.exe /D +1</span></span>
<span class="line"><span>FORFILES /S /M *.doc /C &quot;cmd /C ECHO @fsize&quot;</span></span>
<span class="line"><span>FORFILES /M *.txt /C &quot;cmd /C if @isdir==FALSE notepad.exe @file&quot;</span></span></code></pre></div><h3 id="列出当前文件夹下所有文件和文件夹的相对路径" tabindex="-1">列出当前文件夹下所有文件和文件夹的相对路径 <a class="header-anchor" href="#列出当前文件夹下所有文件和文件夹的相对路径" aria-label="Permalink to “列出当前文件夹下所有文件和文件夹的相对路径”">​</a></h3><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FORFILES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /S /C </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cmd /C ECHO @relpath&quot;</span></span></code></pre></div><h3 id="删除指定文件夹下指定天数前的文件" tabindex="-1">删除指定文件夹下指定天数前的文件 <a class="header-anchor" href="#删除指定文件夹下指定天数前的文件" aria-label="Permalink to “删除指定文件夹下指定天数前的文件”">​</a></h3><div class="language-bat"><button title="Copy Code" class="copy"></button><span class="lang">bat</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">FORFILES</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /P </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">文件路径</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /M </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">搜索掩码</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /S /C </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;cmd /C IF @isdir==FALSE DEL @path /F /Q&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> /D </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">文件日期</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><blockquote><p><strong>&lt;文件路径&gt;</strong> 示例：<code>&quot;D:\Example\Folder&quot;</code>、<code>&quot;.\Example\Folder&quot;</code>​</p><p><strong>&lt;搜索掩码&gt;</strong> 示例：<code>*.exe</code>、<code>*.png</code>、<code>*.txt</code>​</p><p><strong>&lt;文件日期&gt;</strong> 示例：<code>-100</code>（100 天前）、<code>-200</code>（200 天前）、<code>-365</code>（365 天前）</p></blockquote><h2 id="相关链接" tabindex="-1">相关链接 <a class="header-anchor" href="#相关链接" aria-label="Permalink to “相关链接”">​</a></h2><ul><li><a href="https://docs.microsoft.com/en-us/windows-server/administration/windows-commands/forfiles" target="_blank" rel="noreferrer">Microsoft Docs - forfiles</a></li><li><a href="https://blog.csdn.net/sandy9919/article/details/82932460" target="_blank" rel="noreferrer">CSDN - forfiles 命令说明 &amp; 用法示例</a></li><li><a href="https://blog.csdn.net/qq_35957944/article/details/108282201" target="_blank" rel="noreferrer">CSDN - 使用 CMD 删除指定文件夹下指定时间的文件</a></li></ul><p>‍</p></div></div></main><footer class="VPDocFooter" data-v-689a3e08 data-v-2b3e5820><!--[--><!--[--><!--[--><!--[--><hr class="custom__divider"><div class="doc-content-footer"><div class="post-tags"><!--[--><span class="VPBadge info"><!--[-->Windows<!--]--></span><span class="VPBadge info"><!--[-->命令<!--]--></span><span class="VPBadge info"><!--[-->命令提示符<!--]--></span><!--]--></div><div class="post-date" style=""><span>最后更新于：</span><span>2025-03-16 16:08:11</span></div></div><div class="page-comments"></div><!--]--><!--]--><!--]--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><div class="site-footer"><div class="site-footer__row"><span>Copyright © Frost-ZX • Powered by VitePress</span></div><!----></div><!--]--></div></div>
    
    
  </body>
</html>