import{_ as i,c as a,o as n,ah as t}from"./chunks/framework.DZmKp_jX.js";const E=JSON.parse('{"title":"「Minecraft」修改 Dynmap 让 WarsFtbDynmap 能正常使用","description":"","frontmatter":{"title":"「Minecraft」修改 Dynmap 让 WarsFtbDynmap 能正常使用","date":"2025-03-16T18:58:37.000Z","lastmod":"2025-03-16T19:02:34.000Z","tags":["Minecraft","模组","代码片段","Dynmap"]},"headers":[],"relativePath":"content/dynmapforge-warsftbdynmap-compatible.md","filePath":"content/dynmapforge-warsftbdynmap-compatible.md"}'),e={name:"content/dynmapforge-warsftbdynmap-compatible.md"};function l(h,s,p,k,r,d){return n(),a("div",null,[...s[0]||(s[0]=[t(`<h1 id="「minecraft」修改-dynmap-让-warsftbdynmap-能正常使用" tabindex="-1">「Minecraft」修改 Dynmap 让 WarsFtbDynmap 能正常使用 <a class="header-anchor" href="#「minecraft」修改-dynmap-让-warsftbdynmap-能正常使用" aria-label="Permalink to “「Minecraft」修改 Dynmap 让 WarsFtbDynmap 能正常使用”">​</a></h1><p>修改 Dynmap Forge 的 <code>index.html</code> 和 <code>markers.js</code> 让 WarsFtbDynmap 能正常使用。记录下来，方便下次使用。</p><p>版本信息：</p><ul><li>Minecraft Java Edition 正式版 1.12.2 Forge</li><li><a href="https://minecraft.curseforge.com/projects/dynmapforge" target="_blank" rel="noreferrer">DynmapForge</a> V3.0 beta 3</li><li><a href="https://minecraft.curseforge.com/projects/warsftbdynmap" target="_blank" rel="noreferrer">WarsFtbDynmap</a> V1.0.4</li></ul><hr><h2 id="前言" tabindex="-1">前言 <a class="header-anchor" href="#前言" aria-label="Permalink to “前言”">​</a></h2><p>可能是因为服务端的多世界功能是使用模组 <a href="https://minecraft.curseforge.com/projects/just-enough-dimensions" target="_blank" rel="noreferrer">Just Enough Dimensions</a> 实现的，然后 <code>WarsFtbDynmap</code> 不能正确识别世界，导致其生成的<code>marker.json</code>文件的文件名为 <code>marker_.json</code> ，而不是 <code>marker_世界名称.json</code>（或者直接把<code>标记点</code>的数据写入到原有的 <code>marker_世界名.json</code> 中）。</p><p>因为<code>DynmapForge</code>只能加载对应世界名称的 <code>marker.json</code> 文件，所以 <code>WarsFtbDynmap</code> 不能正常使用（不显示 <a href="https://minecraft.curseforge.com/projects/ftb-utilities" target="_blank" rel="noreferrer">FTB Utilities</a> 设定的领地）。</p><p>这只是临时解决方案，且本方案可能有可以改进的地方。</p><p>目前<code>网页地图</code>只显示世界 <code>world</code> 和世界 <code>DIM0</code>（这两个世界名称是 <code>Just Enough Dimensions</code> 给的；<code>world</code> 是默认的主世界，<code>DIM0</code> 是自己加的世界）。</p><h2 id="进行的修改" tabindex="-1">进行的修改 <a class="header-anchor" href="#进行的修改" aria-label="Permalink to “进行的修改”">​</a></h2><h4 id="dynmap-web-js-markers-js" tabindex="-1">dynmap/web/js/markers.js <a class="header-anchor" href="#dynmap-web-js-markers-js" aria-label="Permalink to “dynmap/web/js/markers.js”">​</a></h4><p>删除了第 28 行中的<code>world</code>，使在<code>网页地图</code>中切换世界时不能自动传入要加载的<code>marker.json</code>的文件名中的<code>world</code>参数。</p><div class="language-diff"><button title="Copy Code" class="copy"></button><span class="lang">diff</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#B31D28;--shiki-dark:#FDAEB7;">- function loadmarkers(world) {</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">+ function loadmarkers() {</span></span></code></pre></div><h4 id="dynmap-web-index-html" tabindex="-1">dynmap/web/index.html <a class="header-anchor" href="#dynmap-web-index-html" aria-label="Permalink to “dynmap/web/index.html”">​</a></h4><blockquote><p>因为去掉了“传入参数”，加载 <code>marker.json</code> 时会出错，所以要写一个用于手动传入参数的东西。</p></blockquote><p>在第 38 行的后面插入 1 行，写入以下内容（用于设定初始加载的 <code>marker.json</code> 的世界名称为 <code>DIM0</code>）：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/javascript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;world </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;DIM0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><p>在第 46 行的后面插入 11 行，写入以下内容（切换世界用的 function）：</p><div class="language-html"><button title="Copy Code" class="copy"></button><span class="lang">html</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;text/javascript&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadMarkersDefault</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        world </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;world&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadMarkersDIM0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        world </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;DIM0&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> loadMarkersFTB</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        world </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">script</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;</span></span></code></pre></div><h4 id="dynmap-configuration-txt" tabindex="-1">dynmap/configuration.txt <a class="header-anchor" href="#dynmap-configuration-txt" aria-label="Permalink to “dynmap/configuration.txt”">​</a></h4><blockquote><p>修改 <code>DynmapForge</code> 的配置文件，添加用于切换要加载的 <code>marker.json</code> 的按钮。</p></blockquote><p>在第 178 行左右（内容是 <code># Note: more than one logo component can be defined</code>）的后面插入 18 行，写入以下内容：</p><div class="language-yaml"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">org.dynmap.ClientComponent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">logo</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;加载标记 - FTB&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  logourl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;images/block_biome.png&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  linkurl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript:loadMarkersFTB();&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bottom-left</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">org.dynmap.ClientComponent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">logo</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;加载标记 - 主世界&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  logourl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;images/block_biome.png&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  linkurl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript:loadMarkersDIM0();&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bottom-left</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">- </span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">class</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">org.dynmap.ClientComponent</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">logo</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  text</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;加载标记 - 默认&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  logourl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;images/block_biome.png&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  linkurl</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;javascript:loadMarkersDefault();&quot;</span></span>
<span class="line"><span style="--shiki-light:#22863A;--shiki-dark:#85E89D;">  position</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">bottom-left</span></span></code></pre></div><h2 id="结果" tabindex="-1">结果 <a class="header-anchor" href="#结果" aria-label="Permalink to “结果”">​</a></h2><p>网页地图的左下角多了 3 个图标，依次是：</p><ul><li>加载标记 - 默认</li><li>加载标记 - 主世界</li><li>加载标记 - FTB</li></ul><p>点一下图标，然后再在右侧的侧边栏切换一下世界，就可以切换显示相应的标记了。（本来想点一下图标就能完成切换，但是暂时没有找到方法）。</p><p>‍</p>`,29)])])}const c=i(e,[["render",l]]);export{E as __pageData,c as default};
