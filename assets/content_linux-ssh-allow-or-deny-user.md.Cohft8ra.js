import{_ as a,c as s,o as n,ah as t}from"./chunks/framework.BaaE5B5v.js";const u=JSON.parse('{"title":"Linux 允许或禁止指定用户进行 SSH 登录","description":"","frontmatter":{"title":"Linux 允许或禁止指定用户进行 SSH 登录","date":"2025-03-16T16:04:28.000Z","lastmod":"2025-03-16T16:06:51.000Z","tags":["Linux","SSH","配置"]},"headers":[],"relativePath":"content/linux-ssh-allow-or-deny-user.md","filePath":"content/linux-ssh-allow-or-deny-user.md"}'),l={name:"content/linux-ssh-allow-or-deny-user.md"};function i(o,e,r,p,c,d){return n(),s("div",null,[...e[0]||(e[0]=[t(`<h1 id="linux-允许或禁止指定用户进行-ssh-登录" tabindex="-1">Linux 允许或禁止指定用户进行 SSH 登录 <a class="header-anchor" href="#linux-允许或禁止指定用户进行-ssh-登录" aria-label="Permalink to “Linux 允许或禁止指定用户进行 SSH 登录”">​</a></h1><h2 id="参考资料" tabindex="-1">参考资料 <a class="header-anchor" href="#参考资料" aria-label="Permalink to “参考资料”">​</a></h2><ul><li><a href="http://manpages.ubuntu.com/manpages/precise/en/man5/sshd_config.5.html" target="_blank" rel="noreferrer">Ubuntu Manpage: sshd_config</a></li><li><a href="http://manpages.ubuntu.com/manpages/precise/en/man5/ssh_config.5.html" target="_blank" rel="noreferrer">Ubuntu Manpage: ssh_config</a></li></ul><h2 id="允许指定用户登录-白名单" tabindex="-1">允许指定用户登录（白名单） <a class="header-anchor" href="#允许指定用户登录-白名单" aria-label="Permalink to “允许指定用户登录（白名单）”">​</a></h2><p>在 sshd 的配置文件 <code>/etc/ssh/sshd_config</code> 中添加 <code>AllowUsers</code> 项，其后方跟随以空格分隔的用户名 PATTERN 列表。</p><p>例如允许 <code>test-a</code> 用户和从 <code>192.168.1.100</code> 登录的 <code>test-b</code> 用户：</p><div class="language-plaintext"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>AllowUsers test-a test-b@192.168.1.100</span></span></code></pre></div><p><strong>原文</strong></p><blockquote><p>This keyword can be followed by a list of user name patterns, separated by spaces.</p><p>If specified, login is allowed only for user names that match one of the patterns.</p><p>Only user names are valid; a numerical user ID is not recognized.</p><p>By default, login is allowed for all users.</p><p>If the pattern takes the form USER@HOST then USER and HOST are separately checked, restricting logins to particular users from particular hosts.</p><p>The allow/deny directives are processed in the following order: DenyUsers, AllowUsers, DenyGroups, and finally AllowGroups.</p></blockquote><h2 id="禁止指定用户登录-黑名单" tabindex="-1">禁止指定用户登录（黑名单） <a class="header-anchor" href="#禁止指定用户登录-黑名单" aria-label="Permalink to “禁止指定用户登录（黑名单）”">​</a></h2><p>在 sshd 的配置文件 <code>/etc/ssh/sshd_config</code> 中添加 <code>DenyUsers</code> 项，，其后方跟随以空格分隔的用户名 PATTERN 列表。</p><p>例如禁止 <code>test-c</code> 用户和从 <code>192.168.1.100</code> 登录的 <code>test-d</code> 用户：</p><div class="language-plaintext"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>DenyUsers test-c test-d@192.168.1.100</span></span></code></pre></div><p><strong>原文</strong></p><blockquote><p>This keyword can be followed by a list of user name patterns, separated by spaces.</p><p>Login is disallowed for user names that match one of the patterns.</p><p>Only user names are valid; a numerical user ID is not recognized.</p><p>By default, login is allowed for all users.</p><p>If the pattern takes the form USER@HOST then USER and HOST are separately checked, restricting logins to particular users from particular hosts.</p><p>The allow/deny directives are processed in the following order: DenyUsers, AllowUsers, DenyGroups, and finally AllowGroups.</p></blockquote><h2 id="pattern" tabindex="-1">PATTERN <a class="header-anchor" href="#pattern" aria-label="Permalink to “PATTERN”">​</a></h2><p>一个 PATTERN 由零个或多个非空白字符以及“*”（匹配零个或多个字符的通配符）或“?”（仅匹配一个字符的通配符）组成。</p><p>例如匹配主机 <code>192.168.0.0</code> ~ <code>192.168.0.9</code>，可以使用：</p><div class="language-plaintext"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>192.168.0.?</span></span></code></pre></div><p><strong>原文</strong></p><div class="language-plaintext"><button title="Copy Code" class="copy"></button><span class="lang">plaintext</span><pre class="shiki shiki-themes github-light github-dark" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0" dir="ltr"><code><span class="line"><span>A pattern consists of zero or more non-whitespace characters, ‘*’ (a wildcard that matches zero or more characters), or ‘?’ (a wildcard that matches exactly one character).</span></span>
<span class="line"><span>For example, to specify a set of declarations for any host in the “.co.uk” set of domains, the following pattern could be used:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    Host *.co.uk</span></span>
<span class="line"><span></span></span>
<span class="line"><span>The following pattern would match any host in the 192.168.0.[0-9] network range:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    Host 192.168.0.?</span></span>
<span class="line"><span></span></span>
<span class="line"><span>A pattern-list is a comma-separated list of patterns.</span></span>
<span class="line"><span>Patterns within pattern-lists may be negated by preceding them with an exclamation mark (‘!’).</span></span>
<span class="line"><span>For example, to allow a key to be used from anywhere within an organisation except from the “dialup” pool, the following entry (in authorized_keys) could be used:</span></span>
<span class="line"><span></span></span>
<span class="line"><span>    from=&quot;!*.dialup.example.com,*.example.com&quot;</span></span></code></pre></div><h2 id="注意" tabindex="-1">注意 <a class="header-anchor" href="#注意" aria-label="Permalink to “注意”">​</a></h2><ul><li>配置完成后需要重启 <code>sshd</code> 服务（例如 <code>service sshd restart</code>）。</li><li>配置的 allow / deny 指令按照此顺序进行处理：<code>DenyUsers -&gt; AllowUsers -&gt; DenyGroups -&gt; AllowGroups</code>​</li></ul><p>‍</p>`,24)])])}const g=a(l,[["render",i]]);export{u as __pageData,g as default};
